import{t as D,a as q}from"../chunks/4tmbN6F0.js";import{i as ye}from"../chunks/DKdrHJ0H.js";import{h as I,a as ge,b as be,n as f,N as se,r as ke,c as Ae,d as Q,s as W,e as K,i as P,O as Ie,f as ue,g as oe,p as Se,P as fe,Q as Ee,R as Y,S as j,V as J,L as ee,W as Te,X as Me,Y as xe,Z as Ne,_ as Le,y as we,$ as Ce,a0 as Re,a1 as Oe,a2 as Ve,a3 as qe,a4 as Pe,a5 as He,m as De,a6 as Ue,a7 as ve,a8 as Be,A as Ye,G as A,z as ae,C as Ke,a9 as $,B as z,aa as Je,D as F,F as G,ab as L}from"../chunks/DoBXUIk9.js";import{a as $e,l as ce,e as re,s as ne}from"../chunks/nt5GT3Az.js";import{i as te}from"../chunks/CSaKpg9D.js";import{o as ze}from"../chunks/knOpaNyT.js";function Fe(e,a){return a}function Ge(e,a,r,l){for(var t=[],n=a.length,o=0;o<n;o++)xe(a[o].e,t,!0);var _=n>0&&t.length===0&&r!==null;if(_){var d=r.parentNode;Ne(d),d.append(r),l.clear(),E(e,a[0].prev,a[n-1].next)}Le(t,()=>{for(var b=0;b<n;b++){var i=a[b];_||(l.delete(i.k),E(e,i.prev,i.next)),we(i.e,!_)}})}function Xe(e,a,r,l,t,n=null){var o=e,_={flags:a,items:new Map,first:null};I&&ge();var d=null,b=!1,i=se(()=>{var v=r();return Ee(v)?v:v==null?[]:fe(v)});be(()=>{var v=f(i),u=v.length;if(b&&u===0)return;b=u===0;let h=!1;if(I){var c=ke(o)===Ae;c!==(u===0)&&(o=Q(),W(o),K(!1),h=!0)}if(I){for(var p=null,y,s=0;s<u;s++){if(P.nodeType===8&&P.data===Ie){o=P,h=!0,K(!1);break}var g=v[s],w=l(g,s);y=_e(P,_,p,null,g,w,s,t,a,r),_.items.set(w,y),p=y}u>0&&W(Q())}I||Ze(v,_,o,t,a,l,r),n!==null&&(u===0?d?ue(d):d=oe(()=>n(o)):d!==null&&Se(d,()=>{d=null})),h&&K(!0),f(i)}),I&&(o=P)}function Ze(e,a,r,l,t,n,o){var _=e.length,d=a.items,b=a.first,i=b,v,u=null,h=[],c=[],p,y,s,g;for(g=0;g<_;g+=1){if(p=e[g],y=n(p,g),s=d.get(y),s===void 0){var w=i?i.e.nodes_start:r;u=_e(w,a,u,u===null?a.first:u.next,p,y,g,l,t,o),d.set(y,u),h=[],c=[],i=u.next;continue}if(Qe(s,p,g),(s.e.f&J)!==0&&ue(s.e),s!==i){if(v!==void 0&&v.has(s)){if(h.length<c.length){var S=c[0],k;u=S.prev;var C=h[0],T=h[h.length-1];for(k=0;k<h.length;k+=1)le(h[k],S,r);for(k=0;k<c.length;k+=1)v.delete(c[k]);E(a,C.prev,T.next),E(a,u,C),E(a,T,S),i=S,u=T,g-=1,h=[],c=[]}else v.delete(s),le(s,i,r),E(a,s.prev,s.next),E(a,s,u===null?a.first:u.next),E(a,u,s),u=s;continue}for(h=[],c=[];i!==null&&i.k!==y;)(i.e.f&J)===0&&(v??(v=new Set)).add(i),c.push(i),i=i.next;if(i===null)continue;s=i}h.push(s),u=s,i=s.next}if(i!==null||v!==void 0){for(var M=v===void 0?[]:fe(v);i!==null;)(i.e.f&J)===0&&M.push(i),i=i.next;var V=M.length;if(V>0){var U=null;Ge(a,M,U,d)}}ee.first=a.first&&a.first.e,ee.last=u&&u.e}function Qe(e,a,r,l){Me(e.v,a),e.i=r}function _e(e,a,r,l,t,n,o,_,d,b){var i=(d&Ce)!==0,v=(d&Re)===0,u=i?v?Y(t):j(t):t,h=(d&Te)===0?o:j(o),c={i:h,v:u,k:n,a:null,e:null,prev:r,next:l};try{return c.e=oe(()=>_(e,u,h,b),I),c.e.prev=r&&r.e,c.e.next=l&&l.e,r===null?a.first=c:(r.next=c,r.e.next=c.e),l!==null&&(l.prev=c,l.e.prev=c.e),c}finally{}}function le(e,a,r){for(var l=e.next?e.next.e.nodes_start:r,t=a?a.e.nodes_start:r,n=e.e.nodes_start;n!==l;){var o=Oe(n);t.before(n),n=o}}function E(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}const We=Symbol("is custom element"),je=Symbol("is html");function R(e){if(I){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var l=e.value;ie(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var t=e.checked;ie(e,"checked",null),e.checked=t}}};e.__on_r=r,Ve(r),$e()}}function ie(e,a,r,l){var t=ea(e);I&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||t[a]!==(t[a]=r)&&(a==="loading"&&(e[qe]=r),e.removeAttribute(a))}function ea(e){return e.__attributes??(e.__attributes={[We]:e.nodeName.includes("-"),[je]:e.namespaceURI===Pe})}function O(e,a,r=a){var l=He();ce(e,"input",t=>{var n=t?e.defaultValue:e.value;if(n=X(e)?Z(n):n,r(n),l&&n!==(n=a())){var o=e.selectionStart,_=e.selectionEnd;e.value=n??"",_!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(_,e.value.length))}}),(I&&e.defaultValue!==e.value||De(a)==null&&e.value)&&r(X(e)?Z(e.value):e.value),Ue(()=>{var t=a();X(e)&&t===Z(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function X(e){var a=e.type;return a==="number"||a==="range"}function Z(e){return e===""?null:+e}function de(e,a,r){if(e.multiple)return na(e,a);for(var l of e.options){var t=H(l);if(Be(t,a)){l.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function aa(e,a){ve(()=>{var r=new MutationObserver(()=>{var l=e.__value;de(e,l)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ra(e,a,r=a){var l=!0;ce(e,"change",t=>{var n=t?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(n),H);else{var _=e.querySelector(n)??e.querySelector("option:not([disabled])");o=_&&H(_)}r(o)}),ve(()=>{var t=a();if(de(e,t,l),l&&t===void 0){var n=e.querySelector(":checked");n!==null&&(t=H(n),r(t))}e.__value=t,l=!1}),aa(e)}function na(e,a){for(var r of e.options)r.selected=~a.indexOf(H(r))}function H(e){return"__value"in e?e.__value:e.value}var ta=D("<option> </option>"),la=D("<pre> </pre>"),ia=D('<select><option disabled selected>Välj material</option><!></select> <input type="number" placeholder="Antal"> <input type="date"> <input type="date"> <h3>Ansvarig</h3> <input placeholder="Namn"> <input placeholder="E-post"> <input placeholder="Telefonnummer"> <button>Skicka bokning</button> <!>',1),sa=D("<p>Laddar material eller saknar API-nyckel...</p>"),ua=D("<h1>Boka material</h1> <button>Sätt API-nyckel</button> <!>",1);function ha(e,a){Ye(a,!1);let r="",l=Y([]),t=Y(null),n=Y({materialId:"",antal:1,från:"",till:"",ansvarig:{namn:"",epost:"",telefonnummer:""}});const o="https://script.google.com/macros/s/AKfycbxfVd-VVcZMR7qquMRPa2VecIACclvj0JS3rrPnUEYPmxLDkISUyRCUNHzSvCycds8t/exec";ze(()=>{r=localStorage.getItem("api_key")||"",r&&d()});function _(){r=prompt("Ange API-nyckel:")??"",localStorage.setItem("api_key",r)}async function d(){const y=await(await fetch(`${o}?key=${r}`)).json();$(l,y.material)}async function b(){$(t,null);const p=await fetch(`${o}?key=${r}`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(f(n))});$(t,await p.json())}ye();var i=ua(),v=A(ae(i),2),u=A(v,2);{var h=p=>{var y=ia(),s=ae(y);z(()=>{f(n),Je(()=>{f(l)})});var g=F(s);g.value=g.__value="";var w=A(g);Xe(w,1,()=>f(l),Fe,(m,x)=>{var N=ta(),B={},pe=F(N,!0);G(N),z(()=>{B!==(B=f(x).MaterialId)&&(N.value=(N.__value=f(x).MaterialId)??""),ne(pe,f(x).Namn)}),q(m,N)}),G(s);var S=A(s,2);R(S);var k=A(S,2);R(k);var C=A(k,2);R(C);var T=A(C,4);R(T);var M=A(T,2);R(M);var V=A(M,2);R(V);var U=A(V,2),he=A(U,2);{var me=m=>{var x=la(),N=F(x,!0);G(x),z(B=>ne(N,B),[()=>JSON.stringify(f(t),null,2)],se),q(m,x)};te(he,m=>{f(t)&&m(me)})}ra(s,()=>f(n).materialId,m=>L(n,f(n).materialId=m)),O(S,()=>f(n).antal,m=>L(n,f(n).antal=m)),O(k,()=>f(n).från,m=>L(n,f(n).från=m)),O(C,()=>f(n).till,m=>L(n,f(n).till=m)),O(T,()=>f(n).ansvarig.namn,m=>L(n,f(n).ansvarig.namn=m)),O(M,()=>f(n).ansvarig.epost,m=>L(n,f(n).ansvarig.epost=m)),O(V,()=>f(n).ansvarig.telefonnummer,m=>L(n,f(n).ansvarig.telefonnummer=m)),re("click",U,b),q(p,y)},c=p=>{var y=sa();q(p,y)};te(u,p=>{f(l).length>0?p(h):p(c,!1)})}re("click",v,_),q(e,i),Ke()}export{ha as component};
