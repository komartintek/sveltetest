import{t as D,a as P}from"../chunks/4tmbN6F0.js";import{i as ge}from"../chunks/DKdrHJ0H.js";import{h as E,a as ye,b as be,n as f,N as se,r as ke,c as Ae,d as W,s as j,e as Z,i as q,O as Ee,f as oe,g as ue,p as Ie,P as fe,Q as Se,R as K,S as Q,V as F,L as ee,W as Te,X as Me,Y as Ne,Z as xe,_ as we,y as Le,$ as Oe,a0 as Ce,a1 as Re,a2 as He,a3 as Pe,a4 as qe,a5 as Be,m as De,a6 as Ve,a7 as ve,a8 as Ge,A as Ke,G as A,z as ae,C as Ze,a9 as U,B as Y,aa as Fe,D as X,F as $,ab as w}from"../chunks/DoBXUIk9.js";import{a as Ue,l as ce,e as re,s as ne}from"../chunks/nt5GT3Az.js";import{i as te}from"../chunks/CSaKpg9D.js";import{o as Ye}from"../chunks/knOpaNyT.js";function Xe(e,a){return a}function $e(e,a,r,l){for(var t=[],n=a.length,u=0;u<n;u++)Ne(a[u].e,t,!0);var _=n>0&&t.length===0&&r!==null;if(_){var d=r.parentNode;xe(d),d.append(r),l.clear(),S(e,a[0].prev,a[n-1].next)}we(t,()=>{for(var b=0;b<n;b++){var i=a[b];_||(l.delete(i.k),S(e,i.prev,i.next)),Le(i.e,!_)}})}function ze(e,a,r,l,t,n=null){var u=e,_={flags:a,items:new Map,first:null};E&&ye();var d=null,b=!1,i=se(()=>{var v=r();return Se(v)?v:v==null?[]:fe(v)});be(()=>{var v=f(i),o=v.length;if(b&&o===0)return;b=o===0;let h=!1;if(E){var c=ke(u)===Ae;c!==(o===0)&&(u=W(),j(u),Z(!1),h=!0)}if(E){for(var p=null,g,s=0;s<o;s++){if(q.nodeType===8&&q.data===Ee){u=q,h=!0,Z(!1);break}var y=v[s],L=l(y,s);g=_e(q,_,p,null,y,L,s,t,a,r),_.items.set(L,g),p=g}o>0&&j(W())}E||Je(v,_,u,t,a,l,r),n!==null&&(o===0?d?oe(d):d=ue(()=>n(u)):d!==null&&Ie(d,()=>{d=null})),h&&Z(!0),f(i)}),E&&(u=q)}function Je(e,a,r,l,t,n,u){var _=e.length,d=a.items,b=a.first,i=b,v,o=null,h=[],c=[],p,g,s,y;for(y=0;y<_;y+=1){if(p=e[y],g=n(p,y),s=d.get(g),s===void 0){var L=i?i.e.nodes_start:r;o=_e(L,a,o,o===null?a.first:o.next,p,g,y,l,t,u),d.set(g,o),h=[],c=[],i=o.next;continue}if(We(s,p,y),(s.e.f&F)!==0&&oe(s.e),s!==i){if(v!==void 0&&v.has(s)){if(h.length<c.length){var I=c[0],k;o=I.prev;var O=h[0],T=h[h.length-1];for(k=0;k<h.length;k+=1)le(h[k],I,r);for(k=0;k<c.length;k+=1)v.delete(c[k]);S(a,O.prev,T.next),S(a,o,O),S(a,T,I),i=I,o=T,y-=1,h=[],c=[]}else v.delete(s),le(s,i,r),S(a,s.prev,s.next),S(a,s,o===null?a.first:o.next),S(a,o,s),o=s;continue}for(h=[],c=[];i!==null&&i.k!==g;)(i.e.f&F)===0&&(v??(v=new Set)).add(i),c.push(i),i=i.next;if(i===null)continue;s=i}h.push(s),o=s,i=s.next}if(i!==null||v!==void 0){for(var M=v===void 0?[]:fe(v);i!==null;)(i.e.f&F)===0&&M.push(i),i=i.next;var H=M.length;if(H>0){var V=null;$e(a,M,V,d)}}ee.first=a.first&&a.first.e,ee.last=o&&o.e}function We(e,a,r,l){Me(e.v,a),e.i=r}function _e(e,a,r,l,t,n,u,_,d,b){var i=(d&Oe)!==0,v=(d&Ce)===0,o=i?v?K(t):Q(t):t,h=(d&Te)===0?u:Q(u),c={i:h,v:o,k:n,a:null,e:null,prev:r,next:l};try{return c.e=ue(()=>_(e,o,h,b),E),c.e.prev=r&&r.e,c.e.next=l&&l.e,r===null?a.first=c:(r.next=c,r.e.next=c.e),l!==null&&(l.prev=c,l.e.prev=c.e),c}finally{}}function le(e,a,r){for(var l=e.next?e.next.e.nodes_start:r,t=a?a.e.nodes_start:r,n=e.e.nodes_start;n!==l;){var u=Re(n);t.before(n),n=u}}function S(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}const je=Symbol("is custom element"),Qe=Symbol("is html");function C(e){if(E){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var l=e.value;ie(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var t=e.checked;ie(e,"checked",null),e.checked=t}}};e.__on_r=r,He(r),Ue()}}function ie(e,a,r,l){var t=ea(e);E&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||t[a]!==(t[a]=r)&&(a==="loading"&&(e[Pe]=r),e.removeAttribute(a))}function ea(e){return e.__attributes??(e.__attributes={[je]:e.nodeName.includes("-"),[Qe]:e.namespaceURI===qe})}function R(e,a,r=a){var l=Be();ce(e,"input",t=>{var n=t?e.defaultValue:e.value;if(n=z(e)?J(n):n,r(n),l&&n!==(n=a())){var u=e.selectionStart,_=e.selectionEnd;e.value=n??"",_!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(_,e.value.length))}}),(E&&e.defaultValue!==e.value||De(a)==null&&e.value)&&r(z(e)?J(e.value):e.value),Ve(()=>{var t=a();z(e)&&t===J(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function z(e){var a=e.type;return a==="number"||a==="range"}function J(e){return e===""?null:+e}function de(e,a,r){if(e.multiple)return na(e,a);for(var l of e.options){var t=B(l);if(Ge(t,a)){l.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function aa(e,a){ve(()=>{var r=new MutationObserver(()=>{var l=e.__value;de(e,l)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ra(e,a,r=a){var l=!0;ce(e,"change",t=>{var n=t?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(n),B);else{var _=e.querySelector(n)??e.querySelector("option:not([disabled])");u=_&&B(_)}r(u)}),ve(()=>{var t=a();if(de(e,t,l),l&&t===void 0){var n=e.querySelector(":checked");n!==null&&(t=B(n),r(t))}e.__value=t,l=!1}),aa(e)}function na(e,a){for(var r of e.options)r.selected=~a.indexOf(B(r))}function B(e){return"__value"in e?e.__value:e.value}var ta=D("<option> </option>"),la=D("<pre> </pre>"),ia=D('<select><option disabled selected>Välj material</option><!></select> <input type="number" placeholder="Antal"> <input type="date"> <input type="date"> <h3>Ansvarig</h3> <input placeholder="Namn"> <input placeholder="E-post"> <input placeholder="Telefonnummer"> <button>Skicka bokning</button> <!>',1),sa=D("<p>Laddar material eller saknar API-nyckel...</p>"),oa=D("<h1>Boka material</h1> <button>Sätt API-nyckel</button> <!>",1);function ha(e,a){Ke(a,!1);let r="",l=K([]),t=K(null),n=K({materialId:"",antal:1,från:"",till:"",ansvarig:{namn:"",epost:"",telefonnummer:""}});const u="https://script.google.com/macros/s/AKfycbxHbEZOCce-sPTdS2H0RFojTA4nWEnjFv5Pjv6nZKziG13bZG3crBpMXTGjZNMxsBog/exec";Ye(()=>{r=localStorage.getItem("api_key")||"",r&&d()});function _(){r=prompt("Ange API-nyckel:")??"",localStorage.setItem("api_key",r)}async function d(){const g=await(await fetch(`${u}?key=${r}`)).json();U(l,g.material)}async function b(){U(t,null);const p=await fetch(`${u}?key=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f(n))});U(t,await p.json())}ge();var i=oa(),v=A(ae(i),2),o=A(v,2);{var h=p=>{var g=ia(),s=ae(g);Y(()=>{f(n),Fe(()=>{f(l)})});var y=X(s);y.value=y.__value="";var L=A(y);ze(L,1,()=>f(l),Xe,(m,N)=>{var x=ta(),G={},pe=X(x,!0);$(x),Y(()=>{G!==(G=f(N).MaterialId)&&(x.value=(x.__value=f(N).MaterialId)??""),ne(pe,f(N).Namn)}),P(m,x)}),$(s);var I=A(s,2);C(I);var k=A(I,2);C(k);var O=A(k,2);C(O);var T=A(O,4);C(T);var M=A(T,2);C(M);var H=A(M,2);C(H);var V=A(H,2),he=A(V,2);{var me=m=>{var N=la(),x=X(N,!0);$(N),Y(G=>ne(x,G),[()=>JSON.stringify(f(t),null,2)],se),P(m,N)};te(he,m=>{f(t)&&m(me)})}ra(s,()=>f(n).materialId,m=>w(n,f(n).materialId=m)),R(I,()=>f(n).antal,m=>w(n,f(n).antal=m)),R(k,()=>f(n).från,m=>w(n,f(n).från=m)),R(O,()=>f(n).till,m=>w(n,f(n).till=m)),R(T,()=>f(n).ansvarig.namn,m=>w(n,f(n).ansvarig.namn=m)),R(M,()=>f(n).ansvarig.epost,m=>w(n,f(n).ansvarig.epost=m)),R(H,()=>f(n).ansvarig.telefonnummer,m=>w(n,f(n).ansvarig.telefonnummer=m)),re("click",V,b),P(p,g)},c=p=>{var g=sa();P(p,g)};te(o,p=>{f(l).length>0?p(h):p(c,!1)})}re("click",v,_),P(e,i),Ze()}export{ha as component};
