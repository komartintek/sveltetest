import{t as B,a as R}from"../chunks/BhVhLtJn.js";import{i as ge}from"../chunks/WEpK6unG.js";import{h as I,a as ye,b as ke,n as v,a3 as ue,r as be,c as Ae,d as $,s as z,e as F,i as q,Z as Ie,f as oe,g as fe,p as Ee,a1 as ve,V as Se,a4 as V,a5 as j,a6 as G,L as ee,a7 as Te,a8 as xe,a9 as Me,a0 as Ne,aa as Le,y as we,ab as Oe,ac as Ce,X as He,ad as Re,ae as qe,af as De,ag as Be,m as Pe,ah as Ue,ai as _e,aj as Ve,A as Ke,G as A,z as ae,C as Fe,ak as J,B as X,al as Ge,D as Y,F as Z,am as w}from"../chunks/CWSZMxCv.js";import{a as Je,l as ce,e as re,s as ne}from"../chunks/7ytlwUHO.js";import{i as te}from"../chunks/BjIo6oiP.js";import{o as Xe}from"../chunks/BbBHWILu.js";function Ye(e,a){return a}function Ze(e,a,r,l){for(var t=[],n=a.length,f=0;f<n;f++)Me(a[f].e,t,!0);var c=n>0&&t.length===0&&r!==null;if(c){var d=r.parentNode;Ne(d),d.append(r),l.clear(),T(e,a[0].prev,a[n-1].next)}Le(t,()=>{for(var y=0;y<n;y++){var i=a[y];c||(l.delete(i.k),T(e,i.prev,i.next)),we(i.e,!c)}})}function Qe(e,a,r,l,t,n=null){var f=e,c={flags:a,items:new Map,first:null};I&&ye();var d=null,y=!1,i=ue(()=>{var _=r();return Se(_)?_:_==null?[]:ve(_)});ke(()=>{var _=v(i),u=_.length;if(y&&u===0)return;y=u===0;let h=!1;if(I){var s=be(f)===Ae;s!==(u===0)&&(f=$(),z(f),F(!1),h=!0)}if(I){for(var p=null,g,o=0;o<u;o++){if(q.nodeType===8&&q.data===Ie){f=q,h=!0,F(!1);break}var k=_[o],E=l(k,o);g=de(q,c,p,null,k,E,o,t,a,r),c.items.set(E,g),p=g}u>0&&z($())}I||We(_,c,f,t,a,l,r),n!==null&&(u===0?d?oe(d):d=fe(()=>n(f)):d!==null&&Ee(d,()=>{d=null})),h&&F(!0),v(i)}),I&&(f=q)}function We(e,a,r,l,t,n,f){var c=e.length,d=a.items,y=a.first,i=y,_,u=null,h=[],s=[],p,g,o,k;for(k=0;k<c;k+=1){if(p=e[k],g=n(p,k),o=d.get(g),o===void 0){var E=i?i.e.nodes_start:r;u=de(E,a,u,u===null?a.first:u.next,p,g,k,l,t,f),d.set(g,u),h=[],s=[],i=u.next;continue}if($e(o,p,k),(o.e.f&G)!==0&&oe(o.e),o!==i){if(_!==void 0&&_.has(o)){if(h.length<s.length){var S=s[0],b;u=S.prev;var O=h[0],x=h[h.length-1];for(b=0;b<h.length;b+=1)le(h[b],S,r);for(b=0;b<s.length;b+=1)_.delete(s[b]);T(a,O.prev,x.next),T(a,u,O),T(a,x,S),i=S,u=x,k-=1,h=[],s=[]}else _.delete(o),le(o,i,r),T(a,o.prev,o.next),T(a,o,u===null?a.first:u.next),T(a,u,o),u=o;continue}for(h=[],s=[];i!==null&&i.k!==g;)(i.e.f&G)===0&&(_??(_=new Set)).add(i),s.push(i),i=i.next;if(i===null)continue;o=i}h.push(o),u=o,i=o.next}if(i!==null||_!==void 0){for(var M=_===void 0?[]:ve(_);i!==null;)(i.e.f&G)===0&&M.push(i),i=i.next;var P=M.length;if(P>0){var K=null;Ze(a,M,K,d)}}ee.first=a.first&&a.first.e,ee.last=u&&u.e}function $e(e,a,r,l){xe(e.v,a),e.i=r}function de(e,a,r,l,t,n,f,c,d,y){var i=(d&Oe)!==0,_=(d&Ce)===0,u=i?_?V(t):j(t):t,h=(d&Te)===0?f:j(f),s={i:h,v:u,k:n,a:null,e:null,prev:r,next:l};try{return s.e=fe(()=>c(e,u,h,y),I),s.e.prev=r&&r.e,s.e.next=l&&l.e,r===null?a.first=s:(r.next=s,r.e.next=s.e),l!==null&&(l.prev=s,l.e.prev=s.e),s}finally{}}function le(e,a,r){for(var l=e.next?e.next.e.nodes_start:r,t=a?a.e.nodes_start:r,n=e.e.nodes_start;n!==l;){var f=He(n);t.before(n),n=f}}function T(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}const ze=Symbol("is custom element"),je=Symbol("is html");function C(e){if(I){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var l=e.value;ie(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var t=e.checked;ie(e,"checked",null),e.checked=t}}};e.__on_r=r,Re(r),Je()}}function ie(e,a,r,l){var t=ea(e);I&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||t[a]!==(t[a]=r)&&(a==="loading"&&(e[qe]=r),e.removeAttribute(a))}function ea(e){return e.__attributes??(e.__attributes={[ze]:e.nodeName.includes("-"),[je]:e.namespaceURI===De})}function H(e,a,r=a){var l=Be();ce(e,"input",t=>{var n=t?e.defaultValue:e.value;if(n=Q(e)?W(n):n,r(n),l&&n!==(n=a())){var f=e.selectionStart,c=e.selectionEnd;e.value=n??"",c!==null&&(e.selectionStart=f,e.selectionEnd=Math.min(c,e.value.length))}}),(I&&e.defaultValue!==e.value||Pe(a)==null&&e.value)&&r(Q(e)?W(e.value):e.value),Ue(()=>{var t=a();Q(e)&&t===W(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function Q(e){var a=e.type;return a==="number"||a==="range"}function W(e){return e===""?null:+e}function he(e,a,r){if(e.multiple)return na(e,a);for(var l of e.options){var t=D(l);if(Ve(t,a)){l.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function aa(e,a){_e(()=>{var r=new MutationObserver(()=>{var l=e.__value;he(e,l)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ra(e,a,r=a){var l=!0;ce(e,"change",t=>{var n=t?"[selected]":":checked",f;if(e.multiple)f=[].map.call(e.querySelectorAll(n),D);else{var c=e.querySelector(n)??e.querySelector("option:not([disabled])");f=c&&D(c)}r(f)}),_e(()=>{var t=a();if(he(e,t,l),l&&t===void 0){var n=e.querySelector(":checked");n!==null&&(t=D(n),r(t))}e.__value=t,l=!1}),aa(e)}function na(e,a){for(var r of e.options)r.selected=~a.indexOf(D(r))}function D(e){return"__value"in e?e.__value:e.value}const se="https://script.google.com/macros/s/AKfycbx37QQFI7hnNU6Hv4E2AsZHBm4CO0u2uWko42K6grUJoEI4vI7krWXa1GxEADLZjH9x/exec";var ta=B("<option> </option>"),la=B("<pre> </pre>"),ia=B('<select><option disabled selected>Välj material</option><!></select> <input type="number" placeholder="Antal"> <input type="date"> <input type="date"> <h3>Ansvarig</h3> <input placeholder="Namn"> <input placeholder="E-post"> <input placeholder="Telefonnummer"> <button>Skicka bokning</button> <!>',1),sa=B("<p>Laddar material eller saknar API-nyckel...</p>"),ua=B("<h1>Boka material</h1> <button>Sätt API-nyckel</button> <!>",1);function ha(e,a){Ke(a,!1);let r="",l=V([]),t=V(null),n=V({materialId:"",antal:1,från:"",till:"",ansvarig:{namn:"",epost:"",telefonnummer:""}});Xe(()=>{r=localStorage.getItem("api_key")||"",r&&c()});function f(){r=prompt("Ange API-nyckel:")??"",localStorage.setItem("api_key",r)}async function c(){const p=await(await fetch(`${se}?key=${r}`)).json();J(l,p.material)}async function d(){J(t,null);const s=await fetch(`${se}?key=${r}`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(v(n))});J(t,await s.json())}ge();var y=ua(),i=A(ae(y),2),_=A(i,2);{var u=s=>{var p=ia(),g=ae(p);X(()=>{v(n),Ge(()=>{v(l)})});var o=Y(g);o.value=o.__value="";var k=A(o);Qe(k,1,()=>v(l),Ye,(m,N)=>{var L=ta(),U={},pe=Y(L,!0);Z(L),X(()=>{U!==(U=v(N).MaterialId)&&(L.value=(L.__value=v(N).MaterialId)??""),ne(pe,v(N).Namn)}),R(m,L)}),Z(g);var E=A(g,2);C(E);var S=A(E,2);C(S);var b=A(S,2);C(b);var O=A(b,4);C(O);var x=A(O,2);C(x);var M=A(x,2);C(M);var P=A(M,2),K=A(P,2);{var me=m=>{var N=la(),L=Y(N,!0);Z(N),X(U=>ne(L,U),[()=>JSON.stringify(v(t),null,2)],ue),R(m,N)};te(K,m=>{v(t)&&m(me)})}ra(g,()=>v(n).materialId,m=>w(n,v(n).materialId=m)),H(E,()=>v(n).antal,m=>w(n,v(n).antal=m)),H(S,()=>v(n).från,m=>w(n,v(n).från=m)),H(b,()=>v(n).till,m=>w(n,v(n).till=m)),H(O,()=>v(n).ansvarig.namn,m=>w(n,v(n).ansvarig.namn=m)),H(x,()=>v(n).ansvarig.epost,m=>w(n,v(n).ansvarig.epost=m)),H(M,()=>v(n).ansvarig.telefonnummer,m=>w(n,v(n).ansvarig.telefonnummer=m)),re("click",P,d),R(s,p)},h=s=>{var p=sa();R(s,p)};te(_,s=>{v(l).length>0?s(u):s(h,!1)})}re("click",i,f),R(e,y),Fe()}export{ha as component};
