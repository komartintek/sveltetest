import{t as D,a as H}from"../chunks/4tmbN6F0.js";import{i as ge}from"../chunks/DKdrHJ0H.js";import{h as I,a as ye,b as be,n as f,N as se,r as ke,c as Ae,d as X,s as Z,e as Q,i as P,O as Ie,f as oe,g as ue,p as Se,P as fe,Q as Ee,R as Y,S as j,V as U,L as ee,W as Te,X as xe,Y as Me,Z as Ne,_ as Le,y as we,$ as Oe,a0 as Ce,a1 as Re,a2 as qe,a3 as He,a4 as Pe,a5 as Ve,m as De,a6 as Ke,a7 as ve,a8 as Be,A as Ye,G as A,z as ae,C as Qe,a9 as G,B as W,aa as Ue,D as $,F as z,ab as L}from"../chunks/DoBXUIk9.js";import{a as Ge,l as _e,e as re,s as ne}from"../chunks/nt5GT3Az.js";import{i as te}from"../chunks/CSaKpg9D.js";import{o as We}from"../chunks/knOpaNyT.js";function $e(e,a){return a}function ze(e,a,r,l){for(var t=[],n=a.length,u=0;u<n;u++)Me(a[u].e,t,!0);var c=n>0&&t.length===0&&r!==null;if(c){var d=r.parentNode;Ne(d),d.append(r),l.clear(),E(e,a[0].prev,a[n-1].next)}Le(t,()=>{for(var b=0;b<n;b++){var i=a[b];c||(l.delete(i.k),E(e,i.prev,i.next)),we(i.e,!c)}})}function Fe(e,a,r,l,t,n=null){var u=e,c={flags:a,items:new Map,first:null};I&&ye();var d=null,b=!1,i=se(()=>{var v=r();return Ee(v)?v:v==null?[]:fe(v)});be(()=>{var v=f(i),o=v.length;if(b&&o===0)return;b=o===0;let h=!1;if(I){var _=ke(u)===Ae;_!==(o===0)&&(u=X(),Z(u),Q(!1),h=!0)}if(I){for(var p=null,g,s=0;s<o;s++){if(P.nodeType===8&&P.data===Ie){u=P,h=!0,Q(!1);break}var y=v[s],w=l(y,s);g=ce(P,c,p,null,y,w,s,t,a,r),c.items.set(w,g),p=g}o>0&&Z(X())}I||Je(v,c,u,t,a,l,r),n!==null&&(o===0?d?oe(d):d=ue(()=>n(u)):d!==null&&Se(d,()=>{d=null})),h&&Q(!0),f(i)}),I&&(u=P)}function Je(e,a,r,l,t,n,u){var c=e.length,d=a.items,b=a.first,i=b,v,o=null,h=[],_=[],p,g,s,y;for(y=0;y<c;y+=1){if(p=e[y],g=n(p,y),s=d.get(g),s===void 0){var w=i?i.e.nodes_start:r;o=ce(w,a,o,o===null?a.first:o.next,p,g,y,l,t,u),d.set(g,o),h=[],_=[],i=o.next;continue}if(Xe(s,p,y),(s.e.f&U)!==0&&oe(s.e),s!==i){if(v!==void 0&&v.has(s)){if(h.length<_.length){var S=_[0],k;o=S.prev;var O=h[0],T=h[h.length-1];for(k=0;k<h.length;k+=1)le(h[k],S,r);for(k=0;k<_.length;k+=1)v.delete(_[k]);E(a,O.prev,T.next),E(a,o,O),E(a,T,S),i=S,o=T,y-=1,h=[],_=[]}else v.delete(s),le(s,i,r),E(a,s.prev,s.next),E(a,s,o===null?a.first:o.next),E(a,o,s),o=s;continue}for(h=[],_=[];i!==null&&i.k!==g;)(i.e.f&U)===0&&(v??(v=new Set)).add(i),_.push(i),i=i.next;if(i===null)continue;s=i}h.push(s),o=s,i=s.next}if(i!==null||v!==void 0){for(var x=v===void 0?[]:fe(v);i!==null;)(i.e.f&U)===0&&x.push(i),i=i.next;var q=x.length;if(q>0){var K=null;ze(a,x,K,d)}}ee.first=a.first&&a.first.e,ee.last=o&&o.e}function Xe(e,a,r,l){xe(e.v,a),e.i=r}function ce(e,a,r,l,t,n,u,c,d,b){var i=(d&Oe)!==0,v=(d&Ce)===0,o=i?v?Y(t):j(t):t,h=(d&Te)===0?u:j(u),_={i:h,v:o,k:n,a:null,e:null,prev:r,next:l};try{return _.e=ue(()=>c(e,o,h,b),I),_.e.prev=r&&r.e,_.e.next=l&&l.e,r===null?a.first=_:(r.next=_,r.e.next=_.e),l!==null&&(l.prev=_,l.e.prev=_.e),_}finally{}}function le(e,a,r){for(var l=e.next?e.next.e.nodes_start:r,t=a?a.e.nodes_start:r,n=e.e.nodes_start;n!==l;){var u=Re(n);t.before(n),n=u}}function E(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}const Ze=Symbol("is custom element"),je=Symbol("is html");function C(e){if(I){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var l=e.value;ie(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var t=e.checked;ie(e,"checked",null),e.checked=t}}};e.__on_r=r,qe(r),Ge()}}function ie(e,a,r,l){var t=ea(e);I&&(t[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||t[a]!==(t[a]=r)&&(a==="loading"&&(e[He]=r),e.removeAttribute(a))}function ea(e){return e.__attributes??(e.__attributes={[Ze]:e.nodeName.includes("-"),[je]:e.namespaceURI===Pe})}function R(e,a,r=a){var l=Ve();_e(e,"input",t=>{var n=t?e.defaultValue:e.value;if(n=F(e)?J(n):n,r(n),l&&n!==(n=a())){var u=e.selectionStart,c=e.selectionEnd;e.value=n??"",c!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(c,e.value.length))}}),(I&&e.defaultValue!==e.value||De(a)==null&&e.value)&&r(F(e)?J(e.value):e.value),Ke(()=>{var t=a();F(e)&&t===J(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function F(e){var a=e.type;return a==="number"||a==="range"}function J(e){return e===""?null:+e}function de(e,a,r){if(e.multiple)return na(e,a);for(var l of e.options){var t=V(l);if(Be(t,a)){l.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function aa(e,a){ve(()=>{var r=new MutationObserver(()=>{var l=e.__value;de(e,l)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ra(e,a,r=a){var l=!0;_e(e,"change",t=>{var n=t?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(n),V);else{var c=e.querySelector(n)??e.querySelector("option:not([disabled])");u=c&&V(c)}r(u)}),ve(()=>{var t=a();if(de(e,t,l),l&&t===void 0){var n=e.querySelector(":checked");n!==null&&(t=V(n),r(t))}e.__value=t,l=!1}),aa(e)}function na(e,a){for(var r of e.options)r.selected=~a.indexOf(V(r))}function V(e){return"__value"in e?e.__value:e.value}var ta=D("<option> </option>"),la=D("<pre> </pre>"),ia=D('<select><option disabled selected>Välj material</option><!></select> <input type="number" placeholder="Antal"> <input type="date"> <input type="date"> <h3>Ansvarig</h3> <input placeholder="Namn"> <input placeholder="E-post"> <input placeholder="Telefonnummer"> <button>Skicka bokning</button> <!>',1),sa=D("<p>Laddar material eller saknar API-nyckel...</p>"),oa=D("<h1>Boka material</h1> <button>Sätt API-nyckel</button> <!>",1);function ha(e,a){Ye(a,!1);let r="",l=Y([]),t=Y(null),n=Y({materialId:"",antal:1,från:"",till:"",ansvarig:{namn:"",epost:"",telefonnummer:""}});const u="https://script.google.com/macros/s/AKfycbw52M2OQbgOKbTyWLG1p3m0ENoY6tAnsgQ4P47vkbfSbz5ry4_WVxiIILS8axgg_oQK/exec";We(()=>{r=localStorage.getItem("api_key")||"",r&&d()});function c(){r=prompt("Ange API-nyckel:")??"",localStorage.setItem("api_key",r)}async function d(){const g=await(await fetch(`${u}?key=${r}`)).json();G(l,g.material)}async function b(){G(t,null);const p=await fetch(`${u}?key=${r}`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(f(n))});G(t,await p.json())}ge();var i=oa(),v=A(ae(i),2),o=A(v,2);{var h=p=>{var g=ia(),s=ae(g);W(()=>{f(n),Ue(()=>{f(l)})});var y=$(s);y.value=y.__value="";var w=A(y);Fe(w,1,()=>f(l),$e,(m,M)=>{var N=ta(),B={},pe=$(N,!0);z(N),W(()=>{B!==(B=f(M).MaterialId)&&(N.value=(N.__value=f(M).MaterialId)??""),ne(pe,f(M).Namn)}),H(m,N)}),z(s);var S=A(s,2);C(S);var k=A(S,2);C(k);var O=A(k,2);C(O);var T=A(O,4);C(T);var x=A(T,2);C(x);var q=A(x,2);C(q);var K=A(q,2),he=A(K,2);{var me=m=>{var M=la(),N=$(M,!0);z(M),W(B=>ne(N,B),[()=>JSON.stringify(f(t),null,2)],se),H(m,M)};te(he,m=>{f(t)&&m(me)})}ra(s,()=>f(n).materialId,m=>L(n,f(n).materialId=m)),R(S,()=>f(n).antal,m=>L(n,f(n).antal=m)),R(k,()=>f(n).från,m=>L(n,f(n).från=m)),R(O,()=>f(n).till,m=>L(n,f(n).till=m)),R(T,()=>f(n).ansvarig.namn,m=>L(n,f(n).ansvarig.namn=m)),R(x,()=>f(n).ansvarig.epost,m=>L(n,f(n).ansvarig.epost=m)),R(q,()=>f(n).ansvarig.telefonnummer,m=>L(n,f(n).ansvarig.telefonnummer=m)),re("click",K,b),H(p,g)},_=p=>{var g=sa();H(p,g)};te(o,p=>{f(l).length>0?p(h):p(_,!1)})}re("click",v,c),H(e,i),Qe()}export{ha as component};
